<document>
    <style>
        /* global variables */
        :root {
            /* color */
            --color0: hsl(229, 57%, 11%);
            --color0Trans: hsl(229, 57%, 11%, 0.85);
            --color1: hsl(228, 56%, 26%);
            --color2: hsl(243, 100%, 93%);
            --color3: hsl(229, 7%, 55%);
            --color4: hsl(230, 55%, 18%);
            --color5: hsl(0, 0%, 100%);

            /* gradient */
            --gradient: linear-gradient(90deg, hsl(6, 100%, 80%) 0%, hsl(335, 100%, 65%) 100%);

            /* font size */
            --fontSize: 14px;

            /* font weight */
            --regularFont: 400;
            --boldFont: 700;
        }

        /* reset default settings */
        * {
            box-sizing: border-box;
        }

        body {
            background-color: green;
            min-height: 100vh;
            padding: 0 10px;

            /* font */
            font-family: 'Raleway', sans-serif;
            font-size: var(--fontSize);
            font-weight: var(--regularFont);

            /* flex */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        @keyframes progressLineTransmission {
            from {
                width: 4%;
            }

            to {
                width: 81.5%;
            }
        }

        .bodyBackground {
            width: 100%;
            height: 100%;
            opacity: 0.75;

            /* position */
            position: absolute;
            left: 0;
            top: 0;
            z-index: -1;

            /* background */
            background-image: url(https://raw.githubusercontent.com/mohammadjarabah/codepen-assets/main/pens/ExpzvRa/images/bg-desktop.png);
            background-repeat: no-repeat;
            background-position: center;
            background-size: cover;
        }

        .container {
            width: 820px;
            height: 195px;

            /* flex */
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
        }


        /* section1 - start */
        .section1 {
            background-color: var(--color1);
            height: 100%;
            padding: 40px 130px 40px 40px;
            border-radius: 8px 90px 8px 8px;

            /* flex */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .section1__buttons {
            width: calc(45px * 3 + 15px * 2);

            /* flex */
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .section1__button {
            background-color: var(--color0);
            width: 45px;
            height: 45px;
            padding: 10px;
            border: none;
            border-radius: 10px;
            position: relative;
            cursor: pointer;

            /* flex */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .section1__button:hover {
            background-color: var(--color0Trans);
        }

        .section1__button:active {
            transform: scale(0.9);
        }

        /* section1 - end */


        /* section2 - start */
        .section2 {
            background-color: var(--color1);
            min-width: 450px;
            height: 75%;
            padding: 30px;
            border-radius: 8px;
            position: relative;
        }

        .section2__text {
            color: var(--color2);
        }

        .section2__text--bold {
            font-weight: var(--boldFont);
        }

        .section2__progressBarContainer {
            margin-top: 15px;
            position: relative;
        }

        .section2__progressBar {
            background-color: var(--color4);
            width: 100%;
            height: 18px;
            padding: 2px;
            border-radius: 50px;

            /* flex */
            display: flex;
            justify-content: flex-start;
            align-items: center;
        }

        .section2__progressBarRect {
            background-image: var(--gradient);
            height: 100%;
            padding: 2px;
            border-radius: inherit;
            animation: progressLineTransmission 2.5s 0.3s ease-in-out both;


            /* flex */
            display: flex;
            align-items: center;
            justify-content: flex-end;
        }

        .section2__progressBarCircle {
            background-color: var(--color5);
            height: calc(14px - 4px);
            width: calc(14px - 4px);
            border-radius: 50%;
            box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
        }

        .section2__progressBarPoint {
            color: var(--color2);
            margin-top: 8px;
            font-size: 12px;
            font-weight: var(--boldFont);
            position: absolute;
        }

        .section2__progressBarPoint--start {
            left: 0;
        }

        .section2__progressBarPoint--end {
            right: 0;
        }

        .section2__storageLeft {
            background-color: var(--color5);
            width: fit-content;
            padding: 20px;
            border-radius: 8px 8px 0px;

            /* flex */
            display: flex;
            justify-content: center;
            align-items: center;

            /* position */
            position: absolute;
            top: 0;
            right: 30px;
            transform: translateY(-70%);

        }

        .section2__storageLeft::before {
            content: '';
            width: 0;
            height: 0;
            border: solid 20px;
            border-color: transparent var(--color5) transparent transparent;

            /* position */
            position: absolute;
            right: 0;
            bottom: 0;
            transform: translateY(50%);

        }

        .section2__storageLeftDigits {
            color: var(--color0);
            font-size: 32px;
            font-weight: var(--boldFont);
        }

        .section2__storageLeftText {
            color: var(--color3);
            margin-left: 7px;
            font-weight: var(--boldFont);
            letter-spacing: 1px;
        }

        /* section2 - end */


        /* media queries - start */
        @media (max-width: 861px) {
            @keyframes progressLineTransmission {
                from {
                    width: 6%;
                }

                to {
                    width: 81.5%;
                }
            }

            .bodyBackground {
                background-image: url(https://raw.githubusercontent.com/mohammadjarabah/codepen-assets/main/pens/ExpzvRa/images/bg-mobile.png);
            }

            .container {
                width: auto;
                height: auto;
                flex-direction: column;
                align-items: center;
            }

            .section1 {
                height: 185px;
                padding: 35px 130px 35px 35px;
            }

            .section2 {
                width: 100%;
                min-width: unset;
                padding: 30px 30px 70px 30px;
                margin-top: 15px;
            }

            .section2__storageLeft {
                padding: 20px;
                border-radius: 8px;

                /* position */
                right: unset;
                left: 50%;
                top: unset;
                bottom: 0;
                transform: translate(-50%, 50%);
            }

            .section2__storageLeft::before {
                content: none;
            }
        }

        @media (max-width: 381px) {
            .container {
                transform: scale(0.8);
            }
        }

        /* media queries - end */
    </style>

    <body>
        <div class='container'>

            <div class='section2'>
                <p class='section2__text'>NÃºmero total de <bold>Devs Sem Fronteiras</bold> <span
                        class='section2__text--bold'>50</span>
                <div class='section2__progressBarContainer'>
                    <div class='section2__progressBar'>
                        <div class='section2__progressBarRect'>
                            <span class='section2__progressBarCircle'></span>
                        </div>
                    </div>
                    <span class='section2__progressBarPoint section2__progressBarPoint--start'>0</span>
                    <span class='section2__progressBarPoint section2__progressBarPoint--end'>50</span>
                </div>
                <div class='section2__storageLeft'>
                    <span class='section2__storageLeftDigits'>50 vagas restantes</span>
                </div>
            </div>
        </div>
    </body>
    <!-- jsDelivr  -->
    <script src="https://cdn.jsdelivr.net/npm/fireworks-js@2.x/dist/index.umd.js"></script>
    <script type="text/javascript">

        const container = document.querySelector('.container')
        const fireworks = new Fireworks.default(container)

        let total = 0;

        function fetchDataAndUpdateUI() {
            fetch('https://a886-34-80-157-216.ngrok.io/api/get_counter')  // Replace with the URL you want to fetch data from
                .then(response => response.json())
                .then(data => {
                    const counterValue = data.counter;
                    if (counterValue != total) {
                        fireworks.start()
                        setTimeout(() => fireworks.stop(), 10000);
                        total = counterValue;
                    }

                    // Update number
                    const boldText = document.querySelector('.section2__text--bold');
                    boldText.textContent = counterValue;

                    // Update progress bar
                    // Update progress bar
                    const progressBar = document.querySelector('.section2__progressBarRect');
                    const progressPercentage = (counterValue / 50) * 100;
                    progressBar.style.width = progressPercentage + '%';

                    // Remove the animation style to prevent it from running again on updates
                    progressBar.style.animation = 'none';


                    // Update remaining slots
                    const remainingSlots = document.querySelector('.section2__storageLeftDigits');
                    remainingSlots.textContent = (50 - counterValue) + ' vagas restantes';
                })
                .catch(error => console.error('Error fetching data:', error));
        }

        fetchDataAndUpdateUI();
        setInterval(fetchDataAndUpdateUI, 5000);  // Calls the function every 20 seconds

    </script>
</document>
